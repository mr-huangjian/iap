
# 大纲

- 商品
    - 商品类型
        - 非订阅
            - 消耗型内购
        - 订阅
    - 档位申请
    - 优惠活动
- 收益
    - 分成
    - 报告
- 通用内购流程
	- 选择商品及数量
	- 是否允许购买
	- 前台付钱扣款
	- 生成订单及票据
	- 后台发货交付
	- 关闭订单
- StoreKit SDK API 解读
    - StoreKit1
        - canMakePayment()
        - finishTransaction()
        - applicationUsername
        - transactionIdentifier
        - appStoreReceipt
    - StoreKit2
        - Swift Only, iOS 15.0 available
        - appAccountToken
        - 优点
            - 提供更多的字段支持、商品信息、订单信息
            - 提供更多的接口，比如订阅、优惠、订单、退款
            - appAccountToken 关联订单
- 内购的内部问题
    - 苹果内购服务器异常，导致大面积应用无法充值
    - 充一笔扣两笔
    - appAccountToken 为空
    - applicationUsername 为空
    - transactionIdentifier 为空
    - appStoreReceipt 为空
    - finishTransaction 后还会收到回调
- 内购的外部问题
    - 外币汇率
    - 刷单
    - 代充
        - 如何代充
    - 越狱设备
        - 如何越狱
        - 越狱可以篡改什么
            - 篡改设备信息、系统信息，比如设备型号、设备分辨率、系统版本
            - 篡改苹果API
    - 第三方插件
        - 有哪些第三方插件
- 充值技术支持
    - Keychain
    - SQLite
        - 查询更符合标准
        - 卸载后无法找回
- 充值界面设计
- 内购业务
    - 质检测试
    - 平时遇到什么问题
        - 玩家无法充值
        - 玩家充值不到账
        - 苹果服务器异常
    - 如何排查问题
    - 有哪些埋点采集
- 其他问题
    - 为什么苹果内购比支付宝、微信支付更复杂？
    - 为什么多服务器多角色的游戏比App更复杂？
